
:root{
  --ink:#0f172a; --muted:#6b7280; --line:#e5e7eb; --card:#ffffff; --bg:#f8fafc;
  --ph1:#2a7cf5; --ph1t:rgba(42,124,245,.10);
  --ph2:#e64b9a; --ph2t:rgba(230,75,154,.10);
  --ph3:#0fb981; --ph3t:rgba(15,185,129,.10);
  --ph4:#7c5cf6; --ph4t:rgba(124,92,246,.10);
  --path:#111827;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:15.5px/1.45 Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}

.site-header{display:flex;justify-content:center;align-items:center;padding:14px 24px}
.site-header .title{font-weight:750;letter-spacing:.2px}

#app{max-width:1120px;margin:0 auto;padding:0 24px 24px}

.topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;position:relative;z-index:100}
.topbar .selects{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.topbar select{padding:6px 8px;border:1px solid var(--line);border-radius:8px;background:#fff;min-width:220px}
.topbar button{padding:8px 12px;border-radius:8px;border:1px solid var(--line);background:#fff;cursor:pointer}

.hero{display:grid;grid-template-columns:200px 1fr 1fr;gap:16px;margin-bottom:16px}
.avatar-wrap{display:flex;flex-direction:column;gap:10px;align-items:center}
.avatar{width:120px;height:120px;border-radius:999px;background:#e2e8f0}
.persona-name{padding:8px 12px;border-radius:12px;background:#fff;border:1px solid var(--line);font-weight:650;min-height:36px;display:flex;align-items:center}

.card{background:var(--card);border:1px solid var(--line);border-radius:14px;overflow:hidden}
.card-head{background:#f1f5f9;border-bottom:1px solid var(--line);padding:8px 12px;font-weight:750}
.card-body{padding:10px 12px}

.bullets{margin:.25rem 0 .5rem 0; padding-left:1.2rem; list-style-position:outside}
.bullets li{margin:.25rem 0}

.grid{display:grid;grid-template-columns:160px repeat(4,1fr);grid-auto-rows:minmax(84px,auto);gap:12px;margin:8px 0 16px}
.tab{color:#fff;font-weight:800;padding:6px 10px;border-radius:12px 12px 4px 4px;text-align:center}
.tab.ph1{background:var(--ph1)} .tab.ph2{background:var(--ph2)} .tab.ph3{background:var(--ph3)} .tab.ph4{background:var(--ph4)}
.spacer{background:transparent}
.row-label{display:flex;align-items:center;justify-content:center;font-weight:700;color:#374151;background:#f8fafc;border:1px solid var(--line);border-radius:12px}
.cell{background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px}

.cell.tint.ph1{background:var(--ph1t)} .cell.tint.ph2{background:var(--ph2t)} .cell.tint.ph3{background:var(--ph3t)} .cell.tint.ph4{background:var(--ph4t)}

.feelings-merged{grid-column:2 / 6; position:relative; padding:0; min-height:220px}
.feelings-track-layer{position:relative; height:220px}
#feelingsSVG{position:absolute; inset:0; width:100%; height:100%}
#feelingsPath{stroke:var(--path)}
.marker circle{fill:var(--path)}
.marker text{font-weight:800;font-size:12px;dominant-baseline:middle;text-anchor:middle;fill:#fff}

/* quotes never block clicks */
.quotes-layer, .quotes-layer * { pointer-events: none; }
.quotes-layer.grid4{position:absolute; inset:0; display:grid; grid-template-columns:repeat(4,1fr); gap:12px; padding:0 8px}
.qcol{position:relative}
.quote-box{
  position:absolute; width:100%; max-width:100%;
  background:#ffffff; border:1px solid var(--line); border-radius:10px; padding:8px 10px; color:#374151; font-size:13px;
}
.quote-box.above::after{
  content:""; position:absolute; left:16px; bottom:-6px; width:12px; height:12px; background:#fff;
  border-right:1px solid var(--line); border-bottom:1px solid var(--line); transform:rotate(45deg);
}
.quote-box.below::after{
  content:""; position:absolute; left:16px; top:-6px; width:12px; height:12px; background:#fff;
  border-left:1px solid var(--line); border-top:1px solid var(--line); transform:rotate(45deg);
}

/* Emoji Y-axis */
#yaxis line { stroke: #cbd5e1; stroke-width: 1.5; }
#yaxis text { font-size: 18px; dominant-baseline: middle; text-anchor: middle; }

@media (max-width: 900px){
  .hero{grid-template-columns:1fr}
  .grid{grid-template-columns:120px repeat(4,1fr)}
}

@media print{
  .topbar{display:none}
  /* Soft attempt to keep feelings row together */
  .feelings-merged,
  .feelings-track-layer,
  #feelingsSVG { break-inside: avoid; page-break-inside: avoid; }
}


.chip{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);background:#fff;padding:6px 8px;border-radius:999px;font-size:12px;margin-right:10px}
.chip.ok{border-color:#c7f9cc;background:#eaffea}
.chip.warn{border-color:#fde68a;background:#fffbeb}
.chip.err{border-color:#fecaca;background:#fff1f2}

.actions button{margin-left:6px}
